<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Merit & Bonus Dashboard | Jones Road</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8f7f5;
            color: #111;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Password Screen */
        .password-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #f8f7f5;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .password-screen.hidden {
            display: none;
        }

        .password-box {
            background: #fff;
            padding: 48px;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .password-box .logo {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .password-box .subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 32px;
        }

        .password-box label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #666;
            margin-bottom: 8px;
            text-align: left;
        }

        .password-box input {
            width: 100%;
            padding: 14px 16px;
            font-size: 16px;
            font-family: 'DM Sans', sans-serif;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 16px;
            transition: border-color 0.2s;
        }

        .password-box input:focus {
            outline: none;
            border-color: #111;
        }

        .password-box button {
            width: 100%;
            padding: 14px 24px;
            font-size: 13px;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            background: #111;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .password-box button:hover {
            background: #333;
        }

        .password-error {
            color: #dc2626;
            font-size: 13px;
            margin-top: 12px;
            display: none;
        }

        .password-error.visible {
            display: block;
        }

        .lock-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        /* Main Content - Hidden by default */
        .main-content {
            display: none;
        }

        .main-content.visible {
            display: block;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        header p {
            color: #666;
            font-size: 15px;
        }

        /* Summary Cards */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: #fff;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .summary-card.highlight {
            background: #111;
            color: #fff;
        }

        .summary-card h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #666;
            margin-bottom: 8px;
        }

        .summary-card.highlight h3 {
            color: #aaa;
        }

        .summary-card .value {
            font-size: 28px;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
        }

        .summary-card .subvalue {
            font-size: 13px;
            color: #888;
            margin-top: 4px;
        }

        .summary-card.highlight .subvalue {
            color: #aaa;
        }

        /* Filter Section */
        .filters {
            background: #fff;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .filters h2 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 20px;
        }

        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: flex-end;
        }

        .filter-group {
            flex: 1;
            min-width: 180px;
        }

        .filter-group label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
            color: #555;
        }

        .filter-group select {
            width: 100%;
            padding: 10px 12px;
            font-size: 14px;
            font-family: 'DM Sans', sans-serif;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fff;
        }

        .filter-group select:focus {
            outline: none;
            border-color: #111;
        }

        .btn {
            padding: 10px 20px;
            font-size: 12px;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #111;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: #fff;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }

        .chart-card h3 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 20px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Data Table */
        .table-card {
            background: #fff;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            margin-bottom: 30px;
            overflow: hidden;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .table-header h2 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .search-box {
            padding: 10px 14px;
            font-size: 14px;
            border: 1px solid #ddd;
            border-radius: 6px;
            width: 250px;
            font-family: 'DM Sans', sans-serif;
        }

        .search-box:focus {
            outline: none;
            border-color: #111;
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        th, td {
            padding: 12px 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #666;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            position: relative;
        }

        th:hover {
            color: #111;
        }

        th.sorted-asc::after {
            content: ' ^';
            font-size: 10px;
        }

        th.sorted-desc::after {
            content: ' v';
            font-size: 10px;
        }

        tr:hover {
            background: #fafafa;
        }

        .money {
            font-family: 'Space Mono', monospace;
            text-align: right;
        }

        .percent {
            font-family: 'Space Mono', monospace;
            text-align: right;
        }

        .positive {
            color: #16a34a;
        }

        .category-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .category-c-suite { background: #fef3c7; color: #92400e; }
        .category-vice-president { background: #fce7f3; color: #9d174d; }
        .category-senior-director { background: #dbeafe; color: #1e40af; }
        .category-director { background: #e0e7ff; color: #3730a3; }
        .category-senior-manager { background: #d1fae5; color: #065f46; }
        .category-manager { background: #cffafe; color: #0e7490; }
        .category-below-manager { background: #f3f4f6; color: #374151; }

        /* Board View Toggle */
        .view-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .view-btn {
            padding: 12px 24px;
            font-size: 13px;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border: 2px solid #111;
            background: #fff;
            color: #111;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .view-btn.active {
            background: #111;
            color: #fff;
        }

        .view-btn:hover:not(.active) {
            background: #f0f0f0;
        }

        /* Board presentation mode */
        .board-mode .summary-grid {
            grid-template-columns: repeat(4, 1fr);
        }

        .board-mode .summary-card .value {
            font-size: 36px;
        }

        .board-mode .charts-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .board-mode .chart-container {
            height: 350px;
        }

        /* Export buttons */
        .export-section {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #888;
            font-size: 13px;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .filter-row {
                flex-direction: column;
            }

            .filter-group {
                width: 100%;
            }

            .search-box {
                width: 100%;
            }
        }

        @media print {
            body {
                background: #fff;
            }

            .filters, .view-toggle, .export-section, .search-box, .password-screen {
                display: none !important;
            }

            .main-content {
                display: block !important;
            }

            .table-card, .chart-card, .summary-card {
                box-shadow: none;
                border: 1px solid #eee;
            }
        }
    </style>
</head>
<body>
    <!-- Password Screen -->
    <div class="password-screen" id="passwordScreen">
        <div class="password-box">
            <div class="lock-icon">&#128274;</div>
            <div class="logo">Jones Road</div>
            <div class="subtitle">Staff Merit & Bonus Dashboard</div>
            <form onsubmit="checkPassword(event)">
                <label for="password">Enter Password</label>
                <input type="password" id="password" placeholder="Password" autofocus>
                <button type="submit">Access Dashboard</button>
            </form>
            <div class="password-error" id="passwordError">Incorrect password. Please try again.</div>
        </div>
    </div>

    <!-- Main Content (hidden until password entered) -->
    <div class="main-content" id="mainContent">
        <div class="container">
            <header>
                <div class="logo">Jones Road</div>
                <p>2025 Staff Merit & Bonus Dashboard</p>
            </header>

            <!-- View Toggle -->
            <div class="view-toggle">
                <button class="view-btn active" onclick="setView('detailed')">Detailed View</button>
                <button class="view-btn" onclick="setView('board')">Board Presentation</button>
            </div>

            <!-- Summary Cards -->
            <div class="summary-grid" id="summaryGrid">
                <!-- Populated by JS -->
            </div>

            <!-- Filters -->
            <div class="filters">
                <h2>Filters</h2>
                <div class="filter-row">
                    <div class="filter-group">
                        <label>Category</label>
                        <select id="filterCategory" onchange="applyFilters()">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Manager</label>
                        <select id="filterManager" onchange="applyFilters()">
                            <option value="">All Managers</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>C-Suite Responsibility</label>
                        <select id="filterCSuite" onchange="applyFilters()">
                            <option value="">All</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Rating</label>
                        <select id="filterRating" onchange="applyFilters()">
                            <option value="">All Ratings</option>
                        </select>
                    </div>
                    <button class="btn btn-secondary" onclick="resetFilters()">Reset Filters</button>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Total Compensation by Category (2025)</h3>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>Merit Increase % Distribution</h3>
                    <div class="chart-container">
                        <canvas id="meritChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>Headcount by Category</h3>
                    <div class="chart-container">
                        <canvas id="headcountChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>Bonus % by Category</h3>
                    <div class="chart-container">
                        <canvas id="bonusChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Export Section -->
            <div class="export-section">
                <button class="btn btn-secondary" onclick="exportCSV()">Export CSV</button>
                <button class="btn btn-secondary" onclick="window.print()">Print / PDF</button>
            </div>

            <!-- Data Table -->
            <div class="table-card">
                <div class="table-header">
                    <h2>Staff Details (<span id="rowCount">0</span> employees)</h2>
                    <input type="text" class="search-box" id="searchBox" placeholder="Search by name, title..." onkeyup="applyFilters()">
                </div>
                <div class="table-wrapper">
                    <table id="staffTable">
                        <thead>
                            <tr>
                                <th onclick="sortTable('name')">Name</th>
                                <th onclick="sortTable('title')">Title</th>
                                <th onclick="sortTable('manager')">Manager</th>
                                <th onclick="sortTable('category')">Category</th>
                                <th onclick="sortTable('currentSalary')" class="money">Current Salary</th>
                                <th onclick="sortTable('meritPercent')" class="percent">Merit %</th>
                                <th onclick="sortTable('salary2025')" class="money">2025 Salary</th>
                                <th onclick="sortTable('bonus2025')" class="money">2025 Bonus</th>
                                <th onclick="sortTable('bonusPercent')" class="percent">Bonus %</th>
                                <th onclick="sortTable('totalComp')" class="money">Total Comp 2026</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <footer>
                Jones Road Beauty &middot; Staff Merit Dashboard 2025
            </footer>
        </div>
    </div>

    <script>
        // ========================================
        // PASSWORD PROTECTION
        // ========================================
        // Password hash (SHA-256 of "JonesRoad2025")
        // To change the password, update this hash
        // Generate new hash at: https://emn178.github.io/online-tools/sha256.html
        const PASSWORD_HASH = '9d27aa4a98069d39bd9aa8b051ecf6aa84c85c35ad369418f9534d23eee10449';

        // Check if already authenticated this session
        if (sessionStorage.getItem('jr_authenticated') === 'true') {
            document.getElementById('passwordScreen').classList.add('hidden');
            document.getElementById('mainContent').classList.add('visible');
            initializeDashboard();
        }

        async function hashPassword(password) {
            const encoder = new TextEncoder();
            const data = encoder.encode(password);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function checkPassword(event) {
            event.preventDefault();
            const password = document.getElementById('password').value;
            const hash = await hashPassword(password);

            if (hash === PASSWORD_HASH) {
                sessionStorage.setItem('jr_authenticated', 'true');
                document.getElementById('passwordScreen').classList.add('hidden');
                document.getElementById('mainContent').classList.add('visible');
                initializeDashboard();
            } else {
                document.getElementById('passwordError').classList.add('visible');
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        }

        // ========================================
        // DASHBOARD DATA & LOGIC
        // ========================================
        const staffData = [
            { name: "Christina DeVries", title: "COO", manager: "Cody", cSuite: "Board", category: "C-Suite", currentSalary: 260000, meritPercent: 15.38, salary2025: 300000, bonus2025: 0, bonusPercent: 0, totalComp: 303000, rating: null },
            { name: "Cody Plofker", title: "CEO", manager: "Board", cSuite: "Board", category: "C-Suite", currentSalary: 260000, meritPercent: 15.38, salary2025: 300000, bonus2025: 0, bonusPercent: 0, totalComp: 303000, rating: null },
            { name: "Aniseh Abukharma", title: "Director of Retail Operations", manager: "Juliet", cSuite: "Cody", category: "Director", currentSalary: 142000, meritPercent: 4.00, salary2025: 150000, bonus2025: 27206, bonusPercent: 18, totalComp: 182206, rating: 3 },
            { name: "Erin Silverman", title: "Creative Director", manager: "Cody", cSuite: "Bobbi", category: "Director", currentSalary: 142000, meritPercent: 4.00, salary2025: 148000, bonus2025: 28915, bonusPercent: 20, totalComp: 188915, rating: 3 },
            { name: "JT Kim", title: "Director of Logistics & Transportation", manager: "Matt", cSuite: "Chrissy", category: "Director", currentSalary: 130000, meritPercent: 7.69, salary2025: 140000, bonus2025: 27352, bonusPercent: 20, totalComp: 171352, rating: 3 },
            { name: "Carly Steakin", title: "Marketing Operations Manager", manager: "Genevieve", cSuite: "Cody", category: "Manager", currentSalary: 73500, meritPercent: 18.37, salary2025: 87000, bonus2025: 12748, bonusPercent: 15, totalComp: 102748, rating: 3 },
            { name: "Cheyenne Pellicoro", title: "Senior Manager Of Makeup Artistry and Education", manager: "Juliet", cSuite: "Bobbi", category: "Senior Manager", currentSalary: 102000, meritPercent: 27.00, salary2025: 125000, bonus2025: 18316, bonusPercent: 15, totalComp: 160316, rating: 3 },
            { name: "Shane Duffy", title: "Information Systems Manager", manager: "Chrissy", cSuite: "Chrissy", category: "Manager", currentSalary: 86700, meritPercent: 6.00, salary2025: 92000, bonus2025: 12273, bonusPercent: 13, totalComp: 114273, rating: 3 },
            { name: "Payal Patel", title: "Senior Director, Brand Marketing", manager: "Cody", cSuite: "Cody", category: "Senior Director", currentSalary: 173000, meritPercent: 6.94, salary2025: 185000, bonus2025: 45179, bonusPercent: 24, totalComp: 236179, rating: 3 },
            { name: "Adrienne Haynes", title: "Product Development Manager", manager: "Nicole", cSuite: "Chrissy", category: "Manager", currentSalary: 80000, meritPercent: 12.50, salary2025: 90000, bonus2025: 13188, bonusPercent: 15, totalComp: 106188, rating: 3 },
            { name: "Samantha Liegner", title: "Associate Manager Operations", manager: "Matt", cSuite: "Chrissy", category: "Below Manager", currentSalary: 70000, meritPercent: 11.43, salary2025: 78000, bonus2025: 7619, bonusPercent: 10, totalComp: 93619, rating: 3 },
            { name: "Natalie Lopez", title: "Senior Director of Demand & Supply Planning", manager: "Chrissy", cSuite: "Chrissy", category: "Senior Director", currentSalary: 175000, meritPercent: 4.00, salary2025: 182000, bonus2025: 44447, bonusPercent: 24, totalComp: 231447, rating: 3 },
            { name: "Kaitlyn Colucci", title: "Office Manager/HR Administrator", manager: "Bianca", cSuite: "Chrissy", category: "Below Manager", currentSalary: 66300, meritPercent: 5.58, salary2025: 70000, bonus2025: 8063, bonusPercent: 12, totalComp: 79063, rating: 2 },
            { name: "Diana Horan", title: "Senior Graphic Designer", manager: "Erin", cSuite: "Cody", category: "Manager", currentSalary: 81600, meritPercent: 4.00, salary2025: 85000, bonus2025: 12455, bonusPercent: 15, totalComp: 100455, rating: 3 },
            { name: "Alyssa Darlington", title: "Community Associate", manager: "Matt", cSuite: "Chrissy", category: "Below Manager", currentSalary: 59300, meritPercent: 3.00, salary2025: 61000, bonus2025: 5959, bonusPercent: 10, totalComp: 67959, rating: 2 },
            { name: "Genevieve Outwater", title: "Sr. Manager, Marketing Ops", manager: "Payal", cSuite: "Cody", category: "Senior Manager", currentSalary: 110000, meritPercent: 9.00, salary2025: 120000, bonus2025: 17583, bonusPercent: 15, totalComp: 147583, rating: 3 },
            { name: "Nicole Near", title: "Director of Product Development", manager: "Chrissy", cSuite: "Chrissy", category: "Director", currentSalary: 150000, meritPercent: 4.00, salary2025: 156000, bonus2025: 32662, bonusPercent: 21, totalComp: 197662, rating: 3 },
            { name: "Emma Silverman", title: "Content Producer", manager: "Erin", cSuite: "Cody", category: "Manager", currentSalary: 75000, meritPercent: 6.50, salary2025: 80000, bonus2025: 11722, bonusPercent: 15, totalComp: 111722, rating: 3 },
            { name: "Francesca Dygos", title: "Product Development Coordinator", manager: "Nicole", cSuite: "Chrissy", category: "Below Manager", currentSalary: 45760, meritPercent: 35.49, salary2025: 62000, bonus2025: 6056, bonusPercent: 10, totalComp: 70056, rating: 3 },
            { name: "Dana Valencia", title: "Senior Director of QC and Regulatory Affairs", manager: "Chrissy", cSuite: "Chrissy", category: "Senior Director", currentSalary: 193800, meritPercent: 4.00, salary2025: 201500, bonus2025: 44801, bonusPercent: 22, totalComp: 252801, rating: 3 },
            { name: "Ersa Qymyri", title: "Manager of Demand & Supply Planning", manager: "Natalie", cSuite: "Chrissy", category: "Manager", currentSalary: 86700, meritPercent: 10.50, salary2025: 96000, bonus2025: 14067, bonusPercent: 15, totalComp: 113067, rating: 3 },
            { name: "Kaitlyn Quintavalle", title: "CX Shade Matching Associate", manager: "Matt", cSuite: "Chrissy", category: "Below Manager", currentSalary: 56160, meritPercent: 5.00, salary2025: 56160, bonus2025: 5486, bonusPercent: 10, totalComp: 64486, rating: 3 },
            { name: "Hyun Kim", title: "Procurement Manager", manager: "Matt", cSuite: "Chrissy", category: "Manager", currentSalary: 100000, meritPercent: 10.00, salary2025: 110000, bonus2025: 18043, bonusPercent: 16, totalComp: 138043, rating: 4 },
            { name: "Cecily Lentz", title: "Benefits & Payroll Administrator", manager: "Bianca", cSuite: "C Suite", category: "Manager", currentSalary: 72000, meritPercent: 3.00, salary2025: 74200, bonus2025: 10872, bonusPercent: 15, totalComp: 86872, rating: 3 },
            { name: "Joanne Freeman", title: "AP Staff Accountant", manager: "Bianca", cSuite: "C Suite", category: "Below Manager", currentSalary: 67500, meritPercent: 12.50, salary2025: 76000, bonus2025: 6094, bonusPercent: 8, totalComp: 84094, rating: 2 },
            { name: "Emily Wouters", title: "CX Makeup Artist", manager: "Matt", cSuite: "Chrissy", category: "Below Manager", currentSalary: 29120, meritPercent: 0.00, salary2025: 29120, bonus2025: 2912, bonusPercent: 10, totalComp: 31912, rating: 3 },
            { name: "Gianna Glover", title: "Second Assistant to Founder", manager: "Bobbi", cSuite: "Bobbi", category: "Below Manager", currentSalary: 55000, meritPercent: 12.50, salary2025: 62000, bonus2025: 6200, bonusPercent: 10, totalComp: 76200, rating: 4 },
            { name: "Courtney Edwards", title: "Executive Assistant to Founder", manager: "Bobbi", cSuite: "Bobbi", category: "Director", currentSalary: 125000, meritPercent: 4.00, salary2025: 130000, bonus2025: 26000, bonusPercent: 20, totalComp: 159000, rating: 2 },
            { name: "Matthew Jadro", title: "Sr. Director of Supply Chain & CX", manager: "Chrissy", cSuite: "Chrissy", category: "Senior Director", currentSalary: 190000, meritPercent: 4.00, salary2025: 198000, bonus2025: 48354, bonusPercent: 24, totalComp: 252354, rating: 3 },
            { name: "Katie Neglia", title: "Director of Packaging", manager: "Nicole", cSuite: "Chrissy", category: "Director", currentSalary: 140000, meritPercent: 7.14, salary2025: 150000, bonus2025: 31406, bonusPercent: 21, totalComp: 191406, rating: 3 },
            { name: "Charlotte Newman", title: "Assistant to CMRO & Social Media Coordinator", manager: "Cody", cSuite: "Cody", category: "Manager", currentSalary: 68000, meritPercent: 5.80, salary2025: 78000, bonus2025: 4889, bonusPercent: 6, totalComp: 84889, rating: 2 },
            { name: "Bianca Polycarpe", title: "Chief of Staff", manager: "C Suite", cSuite: "C Suite", category: "Director", currentSalary: 175000, meritPercent: 4.00, salary2025: 182000, bonus2025: 35557, bonusPercent: 20, totalComp: 222557, rating: 3 },
            { name: "Samantha Kapalin", title: "CX/Shade Matching Associate", manager: "Matt", cSuite: "Chrissy", category: "Below Manager", currentSalary: 58000, meritPercent: 4.00, salary2025: 60500, bonus2025: 5910, bonusPercent: 10, totalComp: 67910, rating: 3 },
            { name: "Eliot Malone", title: "Senior Accountant", manager: "Bianca", cSuite: "C Suite", category: "Manager", currentSalary: 90000, meritPercent: 3.00, salary2025: 92500, bonus2025: 15361, bonusPercent: 17, totalComp: 110361, rating: 3 },
            { name: "Ben Rosenwald", title: "Sr. Manager, Data", manager: "Bianca", cSuite: "Cody", category: "Senior Manager", currentSalary: 140000, meritPercent: 3.00, salary2025: 143000, bonus2025: 27938, bonusPercent: 20, totalComp: 183938, rating: 4 },
            { name: "Paul Acquaviva", title: "Supply Chain Coordinator", manager: "Samantha L.", cSuite: "Chrissy", category: "Below Manager", currentSalary: 60000, meritPercent: 0.00, salary2025: 60000, bonus2025: 5861, bonusPercent: 10, totalComp: 67861, rating: 3 },
            { name: "Whitney Blau", title: "Director of Retention", manager: "Cody", cSuite: "Cody", category: "Director", currentSalary: 155000, meritPercent: 3.00, salary2025: 170000, bonus2025: 41516, bonusPercent: 24, totalComp: 237516, rating: 4 },
            { name: "Cameron Falco", title: "Video Editor", manager: "Erin", cSuite: "Cody", category: "Below Manager", currentSalary: 75000, meritPercent: 2.50, salary2025: 77000, bonus2025: 7522, bonusPercent: 10, totalComp: 86522, rating: 3 },
            { name: "Joseph Dioslaki", title: "Jr. Content Producer & Editor", manager: "Erin", cSuite: "Cody", category: "Below Manager", currentSalary: 65000, meritPercent: 2.00, salary2025: 66500, bonus2025: 4169, bonusPercent: 6, totalComp: 72169, rating: 2 },
            { name: "Samantha O'Hara", title: "Sr. Copywriter", manager: "Payal", cSuite: "Cody", category: "Manager", currentSalary: 85000, meritPercent: 0.00, salary2025: 85000, bonus2025: 10967, bonusPercent: 13, totalComp: 98967, rating: 3 },
            { name: "Juliet Baker", title: "VP Of Retail", manager: "Cody", cSuite: "Cody", category: "Vice President", currentSalary: 250000, meritPercent: 0.00, salary2025: 250000, bonus2025: 32783, bonusPercent: 13, totalComp: 290783, rating: 3 },
            { name: "Amanda Aldecoa", title: "Regional Director, Retail", manager: "Juliet", cSuite: "Cody", category: "Director", currentSalary: 160000, meritPercent: 0.00, salary2025: 160000, bonus2025: 5769, bonusPercent: 4, totalComp: 168769, rating: 3 },
            { name: "Sam Brady", title: "Growth Marketing Manager", manager: "Whitney", cSuite: "Cody", category: "Manager", currentSalary: 115000, meritPercent: 0.00, salary2025: 115000, bonus2025: 5055, bonusPercent: 4, totalComp: 134055, rating: 3 },
            { name: "Ali Wilson", title: "Business Operations Assistant", manager: "Chrissy", cSuite: "Chrissy", category: "Below Manager", currentSalary: 55000, meritPercent: 0.00, salary2025: 55000, bonus2025: 1719, bonusPercent: 3, totalComp: 57719, rating: null }
        ];

        let filteredData = [...staffData];
        let currentSort = { column: 'name', direction: 'asc' };
        let charts = {};

        function initializeDashboard() {
            populateFilters();
            updateSummary();
            renderTable();
            initCharts();
        }

        function populateFilters() {
            const categories = [...new Set(staffData.map(s => s.category))].sort();
            const categorySelect = document.getElementById('filterCategory');
            categories.forEach(c => {
                categorySelect.innerHTML += `<option value="${c}">${c}</option>`;
            });

            const managers = [...new Set(staffData.map(s => s.manager))].sort();
            const managerSelect = document.getElementById('filterManager');
            managers.forEach(m => {
                managerSelect.innerHTML += `<option value="${m}">${m}</option>`;
            });

            const cSuites = [...new Set(staffData.map(s => s.cSuite))].sort();
            const cSuiteSelect = document.getElementById('filterCSuite');
            cSuites.forEach(c => {
                cSuiteSelect.innerHTML += `<option value="${c}">${c}</option>`;
            });

            const ratings = [...new Set(staffData.map(s => s.rating).filter(r => r !== null))].sort();
            const ratingSelect = document.getElementById('filterRating');
            ratings.forEach(r => {
                ratingSelect.innerHTML += `<option value="${r}">${r}</option>`;
            });
        }

        function applyFilters() {
            const categoryFilter = document.getElementById('filterCategory').value;
            const managerFilter = document.getElementById('filterManager').value;
            const cSuiteFilter = document.getElementById('filterCSuite').value;
            const ratingFilter = document.getElementById('filterRating').value;
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();

            filteredData = staffData.filter(s => {
                if (categoryFilter && s.category !== categoryFilter) return false;
                if (managerFilter && s.manager !== managerFilter) return false;
                if (cSuiteFilter && s.cSuite !== cSuiteFilter) return false;
                if (ratingFilter && s.rating !== parseInt(ratingFilter)) return false;
                if (searchTerm) {
                    const searchable = `${s.name} ${s.title} ${s.manager}`.toLowerCase();
                    if (!searchable.includes(searchTerm)) return false;
                }
                return true;
            });

            updateSummary();
            renderTable();
            updateCharts();
        }

        function resetFilters() {
            document.getElementById('filterCategory').value = '';
            document.getElementById('filterManager').value = '';
            document.getElementById('filterCSuite').value = '';
            document.getElementById('filterRating').value = '';
            document.getElementById('searchBox').value = '';
            filteredData = [...staffData];
            updateSummary();
            renderTable();
            updateCharts();
        }

        function formatMoney(num) {
            return '$' + num.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        }

        function updateSummary() {
            const totalHeadcount = filteredData.length;
            const totalCurrentSalary = filteredData.reduce((sum, s) => sum + s.currentSalary, 0);
            const total2025Salary = filteredData.reduce((sum, s) => sum + s.salary2025, 0);
            const totalBonus = filteredData.reduce((sum, s) => sum + s.bonus2025, 0);
            const totalComp = filteredData.reduce((sum, s) => sum + s.totalComp, 0);
            const avgMerit = filteredData.length > 0 ? (filteredData.reduce((sum, s) => sum + s.meritPercent, 0) / filteredData.length) : 0;
            const avgBonus = filteredData.length > 0 ? (filteredData.reduce((sum, s) => sum + s.bonusPercent, 0) / filteredData.length) : 0;
            const meritIncrease = total2025Salary - totalCurrentSalary;

            document.getElementById('summaryGrid').innerHTML = `
                <div class="summary-card">
                    <h3>Headcount</h3>
                    <div class="value">${totalHeadcount}</div>
                    <div class="subvalue">Full-time employees</div>
                </div>
                <div class="summary-card">
                    <h3>Current Salary Total</h3>
                    <div class="value">${formatMoney(totalCurrentSalary)}</div>
                    <div class="subvalue">Base salaries</div>
                </div>
                <div class="summary-card">
                    <h3>2025 Salary Total</h3>
                    <div class="value">${formatMoney(total2025Salary)}</div>
                    <div class="subvalue positive">+${formatMoney(meritIncrease)} merit</div>
                </div>
                <div class="summary-card">
                    <h3>2025 Bonus Pool</h3>
                    <div class="value">${formatMoney(totalBonus)}</div>
                    <div class="subvalue">Avg ${avgBonus.toFixed(1)}% bonus</div>
                </div>
                <div class="summary-card highlight">
                    <h3>Total Compensation 2026</h3>
                    <div class="value">${formatMoney(totalComp)}</div>
                    <div class="subvalue">Salary + Bonus</div>
                </div>
                <div class="summary-card">
                    <h3>Avg Merit Increase</h3>
                    <div class="value">${avgMerit.toFixed(1)}%</div>
                    <div class="subvalue">${formatMoney(meritIncrease)} total</div>
                </div>
            `;
        }

        function getCategoryClass(category) {
            const classes = {
                'C-Suite': 'category-c-suite',
                'Vice President': 'category-vice-president',
                'Senior Director': 'category-senior-director',
                'Director': 'category-director',
                'Senior Manager': 'category-senior-manager',
                'Manager': 'category-manager',
                'Below Manager': 'category-below-manager'
            };
            return classes[category] || 'category-below-manager';
        }

        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'asc';
            }

            filteredData.sort((a, b) => {
                let valA = a[column];
                let valB = b[column];

                if (typeof valA === 'string') {
                    valA = valA.toLowerCase();
                    valB = valB.toLowerCase();
                }

                if (valA < valB) return currentSort.direction === 'asc' ? -1 : 1;
                if (valA > valB) return currentSort.direction === 'asc' ? 1 : -1;
                return 0;
            });

            renderTable();
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            document.getElementById('rowCount').textContent = filteredData.length;

            document.querySelectorAll('th').forEach(th => {
                th.classList.remove('sorted-asc', 'sorted-desc');
            });

            tbody.innerHTML = filteredData.map(s => `
                <tr>
                    <td><strong>${s.name}</strong></td>
                    <td>${s.title}</td>
                    <td>${s.manager}</td>
                    <td><span class="category-badge ${getCategoryClass(s.category)}">${s.category}</span></td>
                    <td class="money">${formatMoney(s.currentSalary)}</td>
                    <td class="percent ${s.meritPercent > 0 ? 'positive' : ''}">${s.meritPercent.toFixed(1)}%</td>
                    <td class="money">${formatMoney(s.salary2025)}</td>
                    <td class="money">${formatMoney(s.bonus2025)}</td>
                    <td class="percent">${s.bonusPercent}%</td>
                    <td class="money"><strong>${formatMoney(s.totalComp)}</strong></td>
                </tr>
            `).join('');
        }

        function initCharts() {
            const chartColors = {
                'C-Suite': '#fbbf24',
                'Vice President': '#ec4899',
                'Senior Director': '#3b82f6',
                'Director': '#6366f1',
                'Senior Manager': '#10b981',
                'Manager': '#06b6d4',
                'Below Manager': '#6b7280'
            };

            const categoryData = getDataByCategory();
            charts.category = new Chart(document.getElementById('categoryChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        label: 'Total Compensation',
                        data: Object.values(categoryData).map(d => d.totalComp),
                        backgroundColor: Object.keys(categoryData).map(c => chartColors[c] || '#6b7280')
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { callback: value => '$' + (value / 1000) + 'K' }
                        }
                    }
                }
            });

            const meritRanges = getMeritDistribution();
            charts.merit = new Chart(document.getElementById('meritChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(meritRanges),
                    datasets: [{
                        label: 'Employees',
                        data: Object.values(meritRanges),
                        backgroundColor: '#111'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } }
                }
            });

            charts.headcount = new Chart(document.getElementById('headcountChart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        data: Object.values(categoryData).map(d => d.count),
                        backgroundColor: Object.keys(categoryData).map(c => chartColors[c] || '#6b7280')
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'right' } }
                }
            });

            charts.bonus = new Chart(document.getElementById('bonusChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        label: 'Avg Bonus %',
                        data: Object.values(categoryData).map(d => d.avgBonus),
                        backgroundColor: Object.keys(categoryData).map(c => chartColors[c] || '#6b7280')
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { callback: value => value + '%' }
                        }
                    }
                }
            });
        }

        function getDataByCategory() {
            const data = {};
            filteredData.forEach(s => {
                if (!data[s.category]) {
                    data[s.category] = { count: 0, totalComp: 0, totalBonus: 0 };
                }
                data[s.category].count++;
                data[s.category].totalComp += s.totalComp;
                data[s.category].totalBonus += s.bonusPercent;
            });

            Object.keys(data).forEach(k => {
                data[k].avgBonus = data[k].count > 0 ? data[k].totalBonus / data[k].count : 0;
            });

            return data;
        }

        function getMeritDistribution() {
            const ranges = { '0%': 0, '1-5%': 0, '5-10%': 0, '10-15%': 0, '15-20%': 0, '20%+': 0 };

            filteredData.forEach(s => {
                if (s.meritPercent === 0) ranges['0%']++;
                else if (s.meritPercent <= 5) ranges['1-5%']++;
                else if (s.meritPercent <= 10) ranges['5-10%']++;
                else if (s.meritPercent <= 15) ranges['10-15%']++;
                else if (s.meritPercent <= 20) ranges['15-20%']++;
                else ranges['20%+']++;
            });

            return ranges;
        }

        function updateCharts() {
            const categoryData = getDataByCategory();
            const meritRanges = getMeritDistribution();

            charts.category.data.labels = Object.keys(categoryData);
            charts.category.data.datasets[0].data = Object.values(categoryData).map(d => d.totalComp);
            charts.category.update();

            charts.merit.data.datasets[0].data = Object.values(meritRanges);
            charts.merit.update();

            charts.headcount.data.labels = Object.keys(categoryData);
            charts.headcount.data.datasets[0].data = Object.values(categoryData).map(d => d.count);
            charts.headcount.update();

            charts.bonus.data.labels = Object.keys(categoryData);
            charts.bonus.data.datasets[0].data = Object.values(categoryData).map(d => d.avgBonus);
            charts.bonus.update();
        }

        function setView(view) {
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (view === 'board') {
                document.body.classList.add('board-mode');
            } else {
                document.body.classList.remove('board-mode');
            }

            Object.values(charts).forEach(chart => chart.resize());
        }

        function exportCSV() {
            const headers = ['Name', 'Title', 'Manager', 'Category', 'Current Salary', 'Merit %', '2025 Salary', '2025 Bonus', 'Bonus %', 'Total Comp 2026'];
            const rows = filteredData.map(s => [
                s.name, s.title, s.manager, s.category, s.currentSalary,
                s.meritPercent, s.salary2025, s.bonus2025, s.bonusPercent, s.totalComp
            ]);

            const csv = [headers, ...rows].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'staff-merit-2025.csv';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
